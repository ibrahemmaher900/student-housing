# إرشادات الأمان لموقع سكن طالب

## مقدمة

هذا الملف يحتوي على إرشادات الأمان الأساسية لموقع سكن طالب. يجب اتباع هذه الإرشادات عند تطوير الموقع ونشره على الإنترنت.

## قبل النشر على الإنترنت

1. **إنشاء ملف .env**: قم بإنشاء ملف `.env` بناءً على ملف `.env.example` وتعيين قيم آمنة للمتغيرات البيئية.
2. **توليد مفتاح سري جديد**: قم بتوليد مفتاح سري جديد لاستخدامه في الإنتاج:
   ```python
   python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
   ```
3. **تعطيل وضع التصحيح**: تأكد من تعيين `DJANGO_DEBUG=False` في ملف `.env`.
4. **تعيين المضيفين المسموح بهم**: قم بتعيين `DJANGO_ALLOWED_HOSTS` في ملف `.env` بقائمة النطاقات المسموح بها.
5. **تكوين قاعدة بيانات الإنتاج**: استخدم قاعدة بيانات PostgreSQL بدلاً من SQLite في الإنتاج.
6. **تكوين خادم SMTP**: قم بتكوين إعدادات البريد الإلكتروني لإرسال رسائل البريد الإلكتروني.

## إعدادات الأمان

1. **استخدام HTTPS**: تأكد من تكوين الخادم لاستخدام HTTPS وتوجيه جميع طلبات HTTP إلى HTTPS.
2. **تكوين ملفات الوسائط والملفات الثابتة**: تأكد من تكوين الخادم لخدمة الملفات الثابتة والوسائط بشكل صحيح.
3. **تكوين سياسة أمان المحتوى (CSP)**: قم بتكوين CSP لمنع هجمات XSS.
4. **تكوين CORS**: قم بتكوين CORS للسماح بالوصول من النطاقات المسموح بها فقط.
5. **تكوين Django Axes**: قم بتكوين Django Axes لمنع هجمات القوة الغاشمة على صفحة تسجيل الدخول.

## النسخ الاحتياطي والاستعادة

1. **إنشاء نسخ احتياطية منتظمة**: قم بإنشاء نسخ احتياطية منتظمة لقاعدة البيانات والملفات المرفوعة.
2. **اختبار استعادة النسخ الاحتياطية**: تأكد من اختبار استعادة النسخ الاحتياطية بانتظام.

## المراقبة والتسجيل

1. **تكوين التسجيل**: قم بتكوين التسجيل لتسجيل الأخطاء والأحداث المهمة.
2. **مراقبة الموقع**: قم بتكوين أدوات مراقبة الموقع لاكتشاف المشكلات في الوقت المناسب.

## التحديثات والصيانة

1. **تحديث المكتبات**: قم بتحديث المكتبات بانتظام لإصلاح الثغرات الأمنية.
2. **مراقبة الثغرات الأمنية**: قم بمراقبة الثغرات الأمنية في المكتبات المستخدمة.

## أوامر مفيدة

### توليد مفتاح سري جديد
```bash
python -c 'from django.core.management.utils import get_random_secret_key; print(get_random_secret_key())'
```

### جمع الملفات الثابتة
```bash
python manage.py collectstatic --noinput
```

### تشغيل الخادم في الإنتاج
```bash
gunicorn --bind 0.0.0.0:8000 student_housing.wsgi_production:application
```

### إنشاء نسخة احتياطية لقاعدة البيانات
```bash
# لقاعدة بيانات SQLite
cp db.sqlite3 db.sqlite3.backup

# لقاعدة بيانات PostgreSQL
pg_dump -U username -d database_name -f backup.sql
```